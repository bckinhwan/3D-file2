<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>3D Viewer</title>

<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #fff;
  overflow: hidden;
}

/* ===============================
   MODEL
=============================== */
model-viewer {
  width: 100vw;
  height: 100vh;
  background: #fff;
  pointer-events: none; /* â— ëª¨ë¸ ì§ì ‘ ì¡°ì‘ ê¸ˆì§€ */
}

/* ===============================
   INTERACTION LAYER
=============================== */
.interaction-layer {
  position: fixed;
  inset: 0;
  z-index: 20;
  cursor: grab;
}

.interaction-layer:active {
  cursor: grabbing;
}

/* ë¡œë”© UI í°ìƒ‰ */
model-viewer::part(default-progress-mask),
model-viewer::part(default-progress-bar),
model-viewer::part(progress-bar),
model-viewer::part(loading-overlay) {
  background: #fff !important;
}
</style>
</head>

<body>

<model-viewer
  id="viewer"
  src="https://raw.githubusercontent.com/bckinhwan/3D-file2/main/cloth_jacket.glb"
  exposure="1.05"
  shadow-intensity="0.2"
  bounds="legacy">
</model-viewer>

<!-- ğŸ‘» íˆ¬ëª… ì¸í„°ë™ì…˜ ë ˆì´ì–´ -->
<div class="interaction-layer" id="interactionLayer"></div>

<script>
const viewer = document.getElementById('viewer');
const layer = document.getElementById('interactionLayer');

const isMobile = window.matchMedia('(max-width:768px)').matches;

const BASE = {
  elevation: 75,
  distance: isMobile ? '8m' : '9m',
  scale: isMobile ? 0.65 : 0.75
};

viewer.setAttribute('field-of-view', '24deg');
viewer.setAttribute(
  'scale',
  `${BASE.scale} ${BASE.scale} ${BASE.scale}`
);

/* ===============================
   ROTATION STATE
=============================== */
let angle = -90;
let velocity = 0;
let dragging = false;
let lastX = 0;

/* ê°ë„ (ëª¨ë°”ì¼ â†“) */
const SENSITIVITY = isMobile ? 0.12 : 0.35;
/* ê°ì† (ìì—°ìŠ¤ëŸ¬ì›€ í•µì‹¬) */
const DAMPING = 0.92;

function updateOrbit() {
  viewer.setAttribute(
    'camera-orbit',
    `${angle}deg ${BASE.elevation}deg ${BASE.distance}`
  );
}

/* ===============================
   INPUT
=============================== */
layer.addEventListener('pointerdown', (e) => {
  dragging = true;
  lastX = e.clientX;
});

window.addEventListener('pointerup', () => {
  dragging = false;
});

window.addEventListener('pointermove', (e) => {
  if (!dragging) return;

  const dx = e.clientX - lastX;
  lastX = e.clientX;

  /* ğŸ”¥ ë°”ë¡œ ê°ë„ âŒ â†’ ì†ë„ì— ëˆ„ì  */
  velocity += dx * SENSITIVITY;
});

/* ===============================
   ANIMATION LOOP
=============================== */
function animate() {
  /* ì†ë„ ì ìš© */
  angle += velocity;

  /* ê°ì† */
  velocity *= DAMPING;

  /* ë¯¸ì„¸ ë–¨ë¦¼ ì œê±° */
  if (Math.abs(velocity) < 0.001) velocity = 0;

  updateOrbit();
  requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>




