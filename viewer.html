<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>3D Viewer</title>

<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
/* ===============================
   GLOBAL (TRANSPARENT)
=============================== */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: transparent; /* ğŸ”¥ ì™„ì „ íˆ¬ëª… */
  overflow: hidden;
}

/* ===============================
   MODEL VIEWER
=============================== */
model-viewer {
  width: 100vw;
  height: 100vh;
  background: transparent; /* ğŸ”¥ WebGL ìº”ë²„ìŠ¤ íˆ¬ëª… */
  pointer-events: none;     /* â— ëª¨ë¸ ì§ì ‘ ì¡°ì‘ ê¸ˆì§€ */
}

/* ===============================
   INTERACTION LAYER
=============================== */
.interaction-layer {
  position: fixed;
  inset: 0;
  z-index: 20;
  cursor: grab;
}

.interaction-layer:active {
  cursor: grabbing;
}

/* ===============================
   LOADING UI (TRANSPARENT)
=============================== */
model-viewer::part(default-progress-mask),
model-viewer::part(default-progress-bar),
model-viewer::part(progress-bar),
model-viewer::part(loading-overlay) {
  background: transparent !important;
}
</style>
</head>

<body>

<model-viewer
  id="viewer"
  src="https://raw.githubusercontent.com/bckinhwan/3D-file2/main/cloth_jacket.glb"
  exposure="1.05"
  shadow-intensity="0.2"
  bounds="legacy"
  field-of-view="24deg"
  transparent-background
>
</model-viewer>

<!-- ğŸ‘» íˆ¬ëª… ì¸í„°ë™ì…˜ ë ˆì´ì–´ -->
<div class="interaction-layer" id="interactionLayer"></div>

<script>
const viewer = document.getElementById('viewer');
const layer = document.getElementById('interactionLayer');

const isMobile = window.matchMedia('(max-width:768px)').matches;

const BASE = {
  elevation: 75,
  distance: isMobile ? '7m' : '8m',
  scale: isMobile ? 0.65 : 0.65
};

/* ëª¨ë¸ ìŠ¤ì¼€ì¼ */
viewer.setAttribute(
  'scale',
  `${BASE.scale} ${BASE.scale} ${BASE.scale}`
);

let dragging = false;
let lastX = 0;
let angle = 0;

/* ì´ˆê¸° ì¹´ë©”ë¼ */
updateOrbit();

function updateOrbit() {
  viewer.setAttribute(
    'camera-orbit',
    `${angle}deg ${BASE.elevation}deg ${BASE.distance}`
  );
}

/* ===============================
   POINTER INTERACTION
=============================== */
layer.addEventListener('pointerdown', (e) => {
  dragging = true;
  lastX = e.clientX;
});

window.addEventListener('pointerup', () => {
  dragging = false;
});

window.addEventListener('pointermove', (e) => {
  if (!dragging) return;

  const dx = e.clientX - lastX;
  lastX = e.clientX;

  angle += dx * 0.35; /* íšŒì „ ê°ë„ */
  updateOrbit();
});
</script>

</body>
</html>




